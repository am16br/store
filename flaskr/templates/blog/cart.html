{% extends 'base.html' %}

{% block header %}
  <h1>{% block title %}Cart{% endblock %}</h1>
  {% if g.user %}
    <a class="action" href="{{ url_for('blog.add', page='Post') }}">New</a>
  {% endif %}
{% endblock %}

{% block content %}
<table border = 1 width="100%" cellspacing="0">
  <thead>
    <tr>
      {% for x in list %}
      <th>{{x}}</th>
      {% endfor %}
  </thead>
  <tfoot>
    <tr>
      {% for x in list %}
      <th>{{x}}</th>
      {% endfor %}
    </tr>
  </tfoot>
  <tbody>
    {% set ns = namespace (subtotal = 0, shipping = 0) %}

    {% for row in rows %}               <!--These are variables that get loaded by the database-->
        <tr>
          {% for x in list %}
          {% if x == "Image" %}
              <td><img width=200px src="{{ url_for('static', filename=row['Image']) }}"  ></td>
          {% elif x == "Delete Product" %}
            <td>
              <form action="{{ url_for('blog.deletecart', id=row['id']) }}" method="post">
                <input class="danger" type="submit" value="Delete" onclick="return confirm('Are you sure?');">
              </form>
          {% else %}
              <td>{{row[x]}}</td>
              {% set ns.shipping = 5 %}
          {% endif %}
          {% endfor %}
          {% set ns.subtotal = ns.subtotal + row['Price'] %}
        </tr>
    {% endfor %}
  </tbody>
</table>
<div>

<p> Subtotal: ${{ ns.subtotal }} </p>
<p> Shipping: ${{ ns.shipping }} </p>
<p> Total: ${{ ns.shipping + ns.subtotal }} </p>
</div>
<h2>PLACE ORDER</h2>
{% endblock %}
